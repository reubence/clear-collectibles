(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{1434:function(e,t,n){var content=n(2092);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(7).default)("942f2ce2",content,!0,{sourceMap:!1,manualInject:!0})},1435:function(e,t,n){var content=n(2094);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(7).default)("698bfc32",content,!0,{sourceMap:!1,manualInject:!0})},2088:function(e){e.exports=JSON.parse('{"thun_WeReSorryIsmentionEmojisYourContactsAreT_260":{"emojis":"emoji","contacts":"your contacts","text":"We\'re sorry, {emojisOrContacts} are temporarily unavailable."},"thun_Room_261":"Room","thun_NotInRoom_262":"not in room"}')},2089:function(e){e.exports=JSON.parse('{"thun_WeReSorryIsmentionEmojisYourContactsAreT_260":{"emojis":"emojis","contacts":"your contacts","text":"We\'re sorry, {emojisOrContacts} are temporarily unavailable."},"thun_Room_261":"Room","thun_NotInRoom_262":"not in room"}')},2090:function(e){e.exports=JSON.parse('{"thun_WeReSorryIsmentionEmojisYourContactsAreT_260":{"emojis":"emojis","contacts":"your contacts","text":"[猫We\'re sorry, {emojisOrContacts} are temporarily unavailable.猫]"},"thun_Room_261":"[猫Room猫]","thun_NotInRoom_262":"[猫not in room猫]"}')},2091:function(e,t,n){"use strict";n(1434)},2092:function(e,t,n){var r=n(6)(!1);r.push([e.i,'.composer-search-menu-item[data-v-61ac53fc]{display:flex;align-items:center;text-decoration:none;width:100%;box-sizing:border-box;cursor:pointer;padding:5px 15px;border-left:3px solid transparent}@media (hover:hover){.composer-search-menu-item[data-v-61ac53fc]:hover{background-color:var(--gray-80)}}.composer-search-menu-item .emoji[data-v-61ac53fc]{margin-right:10px;margin-top:4px}.composer-search-menu-item.item-active[data-v-61ac53fc]{border-left-color:var(--up-green);background-color:var(--gray-80)}.composer-search-menu-item.contact-mention[data-v-61ac53fc]:after{content:" (" var(--not-in-room-text) ")";font-size:.75em}.composer-search-menu-item.room-contact[data-v-61ac53fc]:after{display:none}.composer-search-menu-item .person-avatar[data-v-61ac53fc]{margin-right:10px}.composer-search-menu-item .item-name[data-v-61ac53fc]{width:0;flex-grow:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.search-alert[data-v-61ac53fc]{margin:0;padding:5px 10px}',""]),e.exports=r},2093:function(e,t,n){"use strict";n(1435)},2094:function(e,t,n){var r=n(6)(!1);r.push([e.i,".composer-search-popover .air3-popper-wrapper{overflow:auto;max-height:Min(305px,calc(100vh - var(--ws-6x) - var(--top-nav-height) - var(--room-header-height) - var(--min-composer-height)))}.composer-search-popover .air3-popper-content{--popper-padding:var(--ws-3x) 0}.composer-search-popover.search-error .air3-popper-wrapper{width:350px}.composer-search-popover.search-error .air3-popper-content{--popper-padding:0}",""]),e.exports=r},2260:function(e,t,n){"use strict";n.r(t);n(1);var r=n(178),o=n(291),l=n(169),map=n(195),c=n(489),d=n(336),m=n(290),v=n(292),f=n(414),h=n(282),I=n(271),y=n(220),O=n(51),N=n(805),x=n(283),E=n(322),T=n(230),j=n(314),_=n(348),k=n(3),S={"en-gb":n(2088),en:n(2089),is:n(2090)};n.e(317).then(n.bind(null,2176));const w=Object(y.a)(j.a,S);var D={props:{roomId:String,target:String,currentItem:Object},i18n:{messages:w},components:{UpCPopover:f.default,UpDPersonAvatar:x.a,UpCAlert:h.default},data:()=>({query$:new r.a,menuItems:[],searchError:null,menuType:null}),computed:{roomContacts(){const e=new Map;return e.set(this.roomId,{roomId:this.roomId,userId:this.roomId,roomLocalizedName:this.$t("thun_Room_1"),roomName:_.a,isPublic:!1,type:"mention"}),this.roomUsers.forEach((t=>{e.set(t.uid,{roomId:"room_".concat(t.uid),userId:t.uid,orgId:t.orgId,roomLocalizedName:t.fullName,roomName:t.fullName,targetUser:t,type:"mention"})})),e},popoverTarget(){return".".concat(this.target)},popoverClass(){return this.searchError?"composer-search-popover search-error":"composer-search-popover"},isMention(){return"mention"===this.menuType},isEmoji(){return"emoji"===this.menuType},notInRoomCssVar(){return{"--not-in-room-text":"'".concat(this.$t("thun_NotInRoom_262"),"'")}}},watch:{currentItem(e){var t;e&&(null===(t=document.querySelector("#".concat(e.roomId||e.key)))||void 0===t||t.scrollIntoView(!1))}},methods:{close(){var e;null===(e=this.$refs.popover)||void 0===e||e.close(),setTimeout((()=>{this.$emit("close")}),300)},toggle(e,t){null!=e&&e.startsWith("@")||null!=e&&e.startsWith(":")?this.query$.next(e.slice(1)):(this.query$.next(null),this.close()),this.menuType=t},getNextItem(){if(this.currentItem){const e=this.menuItems.indexOf(this.currentItem);return this.menuItems[Math.min(e+1,this.menuItems.length-1)]}return null},getPrevItem(){if(this.currentItem){const e=this.menuItems.indexOf(this.currentItem);return this.menuItems[Math.max(e-1,0)]}return null},openMenu(){this.$refs.popover.close(),this.$nextTick((()=>{this.$refs.popover.open()}))},refresh(){this.$refs.popover.isShown&&this.openMenu()},setMenu(e){e.length?(this.$refs.popover.close(),this.menuItems=e,this.$emit("open",this.menuItems),this.openMenu()):this.close()},setError(e){e&&this.openMenu(),this.searchError=e},getIsRoomContact(e){const t=this.roomContacts.get(e.userId);return!!t&&t.orgId===e.orgId},searchRoomUsersAndMentions(e){if(e){const t=new RegExp(e.trim(),"ig"),n=Array.from(this.roomContacts.values()).filter((e=>t.test(e.roomName)));return this.searchMentions(e).pipe(Object(map.a)((e=>{const t=e.filter((e=>!this.getIsRoomContact(e))).map((e=>({...e,roomLocalizedName:e.roomName,type:"mention"})));return n.concat(t)})))}return Object(o.a)(null!=e?Array.from(this.roomContacts.values()):[])},searchEmoji(e){if((null==e?void 0:e.length)>=2){const t=new RegExp(e.trim(),"i"),n=[];return Object(l.a)(Object(E.a)().then((e=>{let{emojisMapping:r}=e;return Object.keys(r).forEach((e=>{const o=t.exec(e);o&&n.push({...r[e],index:o.index,key:e.slice(1,-1),name:e,type:"emoji"})})),n.sort(((a,b)=>a.index-b.index||a.key.length-b.key.length))})))}return Object(o.a)([])},onSelect(e){this.$emit("select",e,this.menuType)},getKeyOrId(e){return this.isMention?e.roomId:e.key}},mounted(){this.query$.pipe(Object(c.a)(150),Object(d.a)((()=>{this.setError(null)})),Object(m.a)((e=>this.isEmoji?this.searchEmoji(e):this.searchRoomUsersAndMentions(e))),Object(map.a)((e=>[null,e])),Object(v.a)((e=>Object(o.a)([e]))),Object(d.a)((e=>{let[t,n]=e;t?this.setError(t):this.setMenu(n)}))).subscribe(),k.b.lazyModule((()=>{setTimeout((()=>{I.a[Object(I.b)(this.alertType)]()}),1e3)}))},beforeDestroy(){this.query$.complete()},setup(e){const{$auth:t}=Object(O.b)();return{renderEmoji:E.c,...Object(T.c)(e.roomId,t),...Object(N.a)(),alertType:"danger"}}},C=(n(2091),n(2093),n(4)),component=Object(C.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.popoverTarget?n("up-c-popover",{ref:"popover",attrs:{size:"md",trigger:"none",placement:"top","custom-class":e.popoverClass,target:e.popoverTarget,"close-button":!1,"visible-arrow":!1}},[e.searchError?n("up-c-alert",{staticClass:"search-alert",attrs:{type:e.alertType}},[e._v("\n    "+e._s(e.$t("thun_WeReSorryIsmentionEmojisYourContactsAreT_260.text",{emojisOrContacts:e.isMention?e.$t("thun_WeReSorryIsmentionEmojisYourContactsAreT_260.contacts"):e.$t("thun_WeReSorryIsmentionEmojisYourContactsAreT_260.emojis")}))+"\n  ")]):e._e(),e._v(" "),e.searchError?e._e():e._l(e.menuItems,(function(t){return n("div",{key:e.getKeyOrId(t),staticClass:"composer-search-menu-item",class:{"item-active":e.currentItem===t,"contact-mention":e.isMention,"room-contact":e.getIsRoomContact(t)},style:e.notInRoomCssVar,attrs:{id:e.getKeyOrId(t)},on:{click:function(n){return e.onSelect(t)}}},[e.isMention?n("up-d-person-avatar",{staticClass:"person-avatar",attrs:{"is-public":Boolean(t.isPublic),person:t.targetUser,"avatar-size":30,"avatar-font-size":16}}):e._e(),e._v(" "),e.isEmoji?n("div",{staticClass:"emoji",domProps:{innerHTML:e._s(e.renderEmoji(t.key,t.class))}}):e._e(),e._v(" "),n("div",{staticClass:"item-name"},[e._v("\n        "+e._s(e.isMention?t.roomLocalizedName:t.key)+"\n      ")])],1)}))],2):e._e()}),[],!1,null,"61ac53fc",null);t.default=component.exports},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return I}));const r={warning:()=>n.e(6).then(n.bind(null,269)),generic:()=>n.e(88).then(n.bind(null,379)),positive:()=>n.e(35).then(n.bind(null,273)),negative:()=>n.e(147).then(n.bind(null,380)),instant:()=>n.e(35).then(n.bind(null,273)),notification:()=>null},o="info",l="generic",c="success",d="positive",m="danger",v="negative",f="notification",h="instant",I=e=>{switch(e){case o:case l:case f:return l;case c:case d:return d;case m:case v:return v;case h:return h;default:return""}}},274:function(e,t,n){var content=n(275);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(7).default)("41c2c75c",content,!0,{sourceMap:!1,manualInject:!0})},275:function(e,t,n){var r=n(6)(!1);r.push([e.i,".air3-alert{--alert-min-height:48px;--alert-max-width:var(--max-width-global-container);--alert-gap:var(--ws-4x);--alert-padding:var(--ws-3x) var(--ws-4x);--alert-radius:var(--radius-8x);--alert-font-size:var(--font-size-base-sm);--alert-icon-size:18px;--alert-bg:var(--bg-info);--alert-text:var(--text-on-info);--alert-text-icon:var(--text-on-info);--alert-bg-success:var(--bg-success);--alert-text-success:var(--text-on-success);--alert-text-icon-success:var(--text-on-success);--alert-bg-warning:var(--bg-warning);--alert-text-warning:var(--text-on-warning);--alert-text-icon-warning:var(--text-on-warning);--alert-bg-danger:var(--bg-danger);--alert-text-danger:var(--text-on-danger);--alert-text-icon-danger:var(--text-on-danger);--alert-inline-bg:var(--bg-info-light);--alert-inline-text:var(--text-on-info-light);--alert-inline-text-icon:var(--text-on-info-light);--alert-inline-bg-success:var(--bg-success-light);--alert-inline-text-success:var(--text-on-success-light);--alert-inline-text-icon-success:var(--color-success);--alert-inline-bg-warning:var(--bg-warning-light);--alert-inline-text-warning:var(--text-on-warning-light);--alert-inline-text-icon-warning:var(--color-warning);--alert-inline-bg-danger:var(--bg-danger-light);--alert-inline-text-danger:var(--text-on-danger-light);--alert-inline-text-icon-danger:var(--color-danger);--alert-wide-min-height:40px;--alert-wide-padding:var(--ws-2x) var(--ws-4x);--alert-wide-radius:0}.air3-alert:not(.air3-alert-inline.air3-alert-generic){--text-link:currentColor;--text-link-hover:currentColor}.air3-alert{display:flex;grid-gap:var(--alert-gap);gap:var(--alert-gap);min-height:var(--alert-min-height);padding:var(--alert-padding);font-size:var(--alert-font-size);border-radius:var(--alert-radius);background:var(--alert-bg);color:var(--alert-text);border:0;border:var(--hc-border,0)}.air3-alert+.air3-alert{margin-top:var(--ws-2x)}.air3-alert .air3-icon{--icon-size:var(--alert-icon-size)}.air3-alert.air3-alert-inline{background:var(--alert-inline-bg);color:var(--alert-inline-text)}.air3-alert.air3-alert-inline .air3-alert-icon{color:var(--alert-inline-text-icon)}.air3-alert .air3-alert-icon{align-items:self-start;display:flex;padding:3px 0 0;color:var(--alert-text-icon)}.air-alert-actions{align-self:flex-start;padding:2px 0 0;display:flex;grid-gap:var(--ws-4x);gap:var(--ws-4x);border:0;background:transparent}.air-alert-actions .air3-alert-close,.air-alert-actions .air3-btn-link{border:0;background:transparent;color:var(--alert-text-icon);cursor:pointer}.air3-alert-positive{--alert-bg:var(--alert-bg-success);--alert-text:var(--alert-text-success);--alert-text-icon:var(--alert-text-icon-success);--alert-inline-bg:var(--alert-inline-bg-success);--alert-inline-text:var(--alert-inline-text-success);--alert-inline-text-icon:var(--alert-inline-text-icon-success)}.air3-alert-warning{--alert-bg:var(--alert-bg-warning);--alert-text:var(--alert-text-warning);--alert-text-icon:var(--alert-text-icon-warning);--alert-inline-bg:var(--alert-inline-bg-warning);--alert-inline-text:var(--alert-inline-text-warning);--alert-inline-text-icon:var(--alert-inline-text-icon-warning)}.air3-alert-negative{--alert-bg:var(--alert-bg-danger);--alert-text:var(--alert-text-danger);--alert-text-icon:var(--alert-text-icon-danger);--alert-inline-bg:var(--alert-inline-bg-danger);--alert-inline-text:var(--alert-inline-text-danger);--alert-inline-text-icon:var(--alert-inline-text-icon-danger)}.air3-alert-content{flex:1;align-self:center;word-wrap:break-word;word-break:break-word}.air3-alert-side-wide{--alert-padding:var(--alert-wide-padding);--alert-min-height:var(--alert-wide-min-height);--alert-radius:var(--alert-wide-radius)}@media (min-width:1200px){.air3-alert-side-wide{--padding-x:calc(50% - min(100%, var(--alert-max-width))/2 + var(--ws-6x)*2/2);padding-left:var(--padding-x);padding-right:var(--padding-x)}}.air3-alert-instant{--alert-instant-width:140px;--alert-instant-height:124px;background-color:hsla(var(--up-black-hsl),95%);width:var(--alert-instant-width);height:var(--alert-instant-height);grid-template-columns:auto;align-items:center;padding:var(--ws-6x)}.air3-alert-instant,.air3-alert-instant .air3-alert-icon{justify-content:center}.air3-alert-instant .air3-alert-icon .air3-icon{--size:36px}.keyboard-user .air3-alert-generic a:focus,.keyboard-user .air3-alert-generic button:focus{--outline-text:currentColor}",""]),e.exports=r},276:function(e){e.exports=JSON.parse('{"vc_CloseTheHiddenlabelAlert_37":"Close the {label} alert","vc_CloseAlert_38":"Close the alert"}')},277:function(e){e.exports=JSON.parse('{"vc_CloseTheHiddenlabelAlert_37":"Close the {label} alert","vc_CloseAlert_38":"Close the alert"}')},278:function(e){e.exports=JSON.parse('{"vc_CloseTheHiddenlabelAlert_37":"猫Close the {label} alert猫","vc_CloseAlert_38":"猫Close the alert猫"}')},282:function(e,t,n){"use strict";n.r(t);var r=n(274),o=n.n(r),l=n(157),c=n(205),d=n(271),m={"en-gb":n(276),en:n(277),is:n(278)},v={injectStyles:[o.a],name:"UpCAlert",components:{UpCIcon:l.default},i18n:{messages:m},props:{type:{type:String,default:"warning"},close:{type:Boolean,default:!1},hiddenLabel:{type:String,default:""},inline:{type:Boolean,default:!0},fullWidth:{type:Boolean,default:!1}},data:()=>({iconClose:c.default}),computed:{alertMappedType:e=>Object(d.b)(e.type),isAlertInstant:e=>"instant"===e.alertType,alertInline:e=>!e.fullWidth&&!e.isAlertInstant&&e.inline,alertType:e=>e.alertMappedType||"warning",alertClass:e=>{const t=["air3-alert-".concat(e.alertType)];return e.fullWidth&&t.push("air3-alert-side-wide"),e.alertInline&&t.push("air3-alert-inline"),t.join(" ")},alertClose:e=>!e.isAlertInstant&&e.close,icon:e=>d.a[e.alertType]},methods:{closeAlert(){this.$emit("alert-close"),setTimeout((()=>{this.$destroy(),this.$el.remove()}))}}},f=n(4),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"air3-alert",class:[e.alertClass],attrs:{role:"alert","data-ev-sublocation":"!alert"}},[n("div",{staticClass:"air3-alert-icon"},[e._t("icon",(function(){return[n("UpCIcon",{attrs:{icon:e.icon}})]}))],2),e._v(" "),n("div",{staticClass:"air3-alert-content"},[e._t("default")],2),e._v(" "),e.isAlertInstant||!e.alertClose&&!e.$slots.actions?e._e():n("div",{staticClass:"air-alert-actions"},[e._t("actions",(function(){return[e.alertClose?n("button",{staticClass:"air3-alert-icon air3-alert-close",attrs:{type:"button","data-ev-label":"alert_close"},on:{click:function(t){return e.closeAlert()}}},[n("span",{staticClass:"sr-only"},[e.hiddenLabel?n("i18n",{attrs:{path:"vc_CloseTheHiddenlabelAlert_37",tag:!1},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n              "+e._s(e.hiddenLabel)+"\n            ")]},proxy:!0}],null,!1,1215030074)}):n("i18n",{attrs:{path:"vc_CloseAlert_38",tag:!1}})],1),e._v(" "),n("UpCIcon",{attrs:{icon:e.iconClose,size:"sm"}})],1):e._e()]}))],2)])}),[],!1,null,null,null);t.default=component.exports},327:function(e,t,n){"use strict";function r(code){return 9===code||32===code}n.d(t,"a",(function(){return C}));const o=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function l(e){return c[e.charCodeAt(0)]}const c=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];function d(e,t){if(!Boolean(e))throw new Error(t)}const m=10,v=2;function f(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(function(e){return"function"==typeof e.toJSON}(e)){const t=e.toJSON();if(t!==e)return"string"==typeof t?t:f(t,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>v)return"[Array]";const n=Math.min(m,e.length),r=e.length-n,o=[];for(let i=0;i<n;++i)o.push(f(e[i],t));1===r?o.push("... 1 more item"):r>1&&o.push(`... ${r} more items`);return"["+o.join(", ")+"]"}(e,n);return function(object,e){const t=Object.entries(object);if(0===t.length)return"{}";if(e.length>v)return"["+function(object){const e=Object.prototype.toString.call(object).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof object.constructor){const e=object.constructor.name;if("string"==typeof e&&""!==e)return e}return e}(object)+"]";const n=t.map((([t,n])=>t+": "+f(n,e)));return"{ "+n.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}Symbol.toStringTag;Symbol.toStringTag;const h={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},I=new Set(Object.keys(h));function y(e){const t=null==e?void 0:e.kind;return"string"==typeof t&&I.has(t)}var O,N;!function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(O||(O={})),function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(N||(N={}));const x=Object.freeze({});function E(e,t){const n=e[t];return"object"==typeof n?n:"function"==typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}function T(e){return function(e,t,n=h){const r=new Map;for(const e of Object.values(N))r.set(e,E(t,e));let o,l,c,m=Array.isArray(e),v=[e],I=-1,O=[],T=e;const path=[],j=[];do{I++;const e=I===v.length,h=e&&0!==O.length;if(e){if(l=0===j.length?void 0:path[path.length-1],T=c,c=j.pop(),h)if(m){T=T.slice();let e=0;for(const[t,n]of O){const r=t-e;null===n?(T.splice(r,1),e++):T[r]=n}}else{T=Object.defineProperties({},Object.getOwnPropertyDescriptors(T));for(const[e,t]of O)T[e]=t}I=o.index,v=o.keys,O=o.edits,m=o.inArray,o=o.prev}else if(c){if(l=m?I:v[I],T=c[l],null==T)continue;path.push(l)}let N;if(!Array.isArray(T)){var _,k;y(T)||d(!1,`Invalid AST Node: ${w=T,f(w,[])}.`);const n=e?null===(_=r.get(T.kind))||void 0===_?void 0:_.leave:null===(k=r.get(T.kind))||void 0===k?void 0:k.enter;if(N=null==n?void 0:n.call(t,T,l,c,path,j),N===x)break;if(!1===N){if(!e){path.pop();continue}}else if(void 0!==N&&(O.push([l,N]),!e)){if(!y(N)){path.pop();continue}T=N}}var S;void 0===N&&h&&O.push([l,T]),e?path.pop():(o={inArray:m,index:I,keys:v,edits:O,prev:o},m=Array.isArray(T),v=m?T:null!==(S=n[T.kind])&&void 0!==S?S:[],I=-1,O=[],c&&j.push(c),c=T)}while(void 0!==o);var w;return 0!==O.length?O[O.length-1][1]:e}(e,j)}const j={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>_(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=S("(",_(e.variableDefinitions,", "),")"),n=_([e.operation,_([e.name,t]),_(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:r})=>e+": "+t+S(" = ",n)+S(" ",_(r," "))},SelectionSet:{leave:({selections:e})=>k(e)},Field:{leave({alias:e,name:t,arguments:n,directives:r,selectionSet:o}){const l=S("",e,": ")+t;let c=l+S("(",_(n,", "),")");return c.length>80&&(c=l+S("(\n",w(_(n,"\n")),"\n)")),_([c,_(r," "),o]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+S(" ",_(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>_(["...",S("on ",e),_(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:r,selectionSet:o})=>`fragment ${e}${S("(",_(n,", "),")")} on ${t} ${S("",_(r," ")," ")}`+o},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t){const n=e.replace(/"""/g,'\\"""'),o=n.split(/\r\n|[\n\r]/g),l=1===o.length,c=o.length>1&&o.slice(1).every((line=>0===line.length||r(line.charCodeAt(0)))),d=n.endsWith('\\"""'),m=e.endsWith('"')&&!d,v=e.endsWith("\\"),f=m||v,h=!(null!=t&&t.minimize)&&(!l||e.length>70||f||c||d);let I="";const y=l&&r(e.charCodeAt(0));return(h&&!y||c)&&(I+="\n"),I+=n,(h||f)&&(I+="\n"),'"""'+I+'"""'}(e):`"${e.replace(o,l)}"`},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+_(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+_(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+S("(",_(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>S("",e,"\n")+_(["schema",_(t," "),k(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>S("",e,"\n")+_(["scalar",t,_(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:o})=>S("",e,"\n")+_(["type",t,S("implements ",_(n," & ")),_(r," "),k(o)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:r,directives:o})=>S("",e,"\n")+t+(D(n)?S("(\n",w(_(n,"\n")),"\n)"):S("(",_(n,", "),")"))+": "+r+S(" ",_(o," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:r,directives:o})=>S("",e,"\n")+_([t+": "+n,S("= ",r),_(o," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:r,fields:o})=>S("",e,"\n")+_(["interface",t,S("implements ",_(n," & ")),_(r," "),k(o)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:r})=>S("",e,"\n")+_(["union",t,_(n," "),S("= ",_(r," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:r})=>S("",e,"\n")+_(["enum",t,_(n," "),k(r)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>S("",e,"\n")+_([t,_(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:r})=>S("",e,"\n")+_(["input",t,_(n," "),k(r)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:r,locations:o})=>S("",e,"\n")+"directive @"+t+(D(n)?S("(\n",w(_(n,"\n")),"\n)"):S("(",_(n,", "),")"))+(r?" repeatable":"")+" on "+_(o," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>_(["extend schema",_(e," "),k(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>_(["extend scalar",e,_(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>_(["extend type",e,S("implements ",_(t," & ")),_(n," "),k(r)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:r})=>_(["extend interface",e,S("implements ",_(t," & ")),_(n," "),k(r)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>_(["extend union",e,_(t," "),S("= ",_(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>_(["extend enum",e,_(t," "),k(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>_(["extend input",e,_(t," "),k(n)]," ")}};function _(e,t=""){var n;return null!==(n=null==e?void 0:e.filter((e=>e)).join(t))&&void 0!==n?n:""}function k(e){return S("{\n",w(_(e,"\n")),"\n}")}function S(e,t,n=""){return null!=t&&""!==t?e+t+n:""}function w(e){return S("  ",e.replace(/\n/g,"\n  "))}function D(e){var t;return null!==(t=null==e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}const C=e=>({fetchQueryResult:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e({handleApiErrors:!1}).post({query:T(t),variables:n}).json()}})},381:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return N}));n(1);var r=n(169),o=n(291),l=n(382),map=n(195),c=n(292),d=n(175);class m extends d.a{constructor(e,t,n){super(e,t,n)}search(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={path:"/public/search",method:"GET",query:this._buildQueryWithOrg(e)};return this._fetchJSON(t)}spotlight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={path:"/public/spotlight",method:"GET",query:this._buildQueryWithOrg(e)};return this._fetchJSON(t)}spotlight4(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={path:"/public/spotlight4",method:"GET",query:this._buildQueryWithOrg(e)};return this._fetchJSON(t)}browseRoomAndUser(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={path:"/public/browse",method:"GET",query:this._buildQueryWithOrg(e)};return this._fetchJSON(t)}healthcheck(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={path:"/healthcheck",method:"GET",query:this._buildQueryWithOrg(e)};return this._fetchJSON(t)}ping(e){return this.healthcheck(e)}getDomain(){return"search"}}var v=n(5),f=n(201);const h=new m({},v.c,v.b),I={ROOMS:"room",CONTACTS:"contact",MESSAGES:"message"},y=[I.ROOMS,I.CONTACTS,I.MESSAGES];class O{constructor(data){var e,t;(Object.assign(this,data),this.id=data.roomId||data.legacyId,"string"==typeof data.roomType)&&(this.roomType=null===(t=[["contact",1],["group",2],["interview",3]].find((e=>{let[t]=e;return t===data.roomType})))||void 0===t?void 0:t[1]);this.roomTypeName=null===(e=Object.entries(f.a).find((e=>{let[,t]=e;return t===this.roomType})))||void 0===e?void 0:e[0],this.targetUserId=this.userId}}class N{mapResult(e){const{records:t}=e,n=e=>{if(e){const t=e[["stringVal","intVal","boolVal","dateVal"].find((t=>t in e))];return"UNKNOWN"===t?null:t}return null};return t.map((e=>{let{metaData:t,snippet:r}=e;const o=n(t.roomType);if(o)return new O({roomId:n(t.roomId),roomName:n(t.roomName),topic:n(t.topic),isPublic:n(t.isPublic),orgId:n(t.orgId),created:n(t.createdTs),roomType:o,...r[0]});const l="".concat(n(t.firstName)||""," ").concat(n(t.lastName)||"").trim(),c=n(t.userId),d=n(t.orgId);return new O({roomId:n(t.roomId)||"room_".concat(c,"_").concat(d),legacyId:n(t.legacyId),roomName:l,roomType:"contact",userId:c,orgId:d,photoUrl:n(t.photoUrl),firstName:n(t.firstName),lastName:n(t.lastName)})}))}buildQuery(e){let{roomId:t,query:n,section:section}=e;return{query:t?"".concat(n," inId:").concat(t):n,limit:20,sortField:"createdTs",sortOrder:"desc",section:section}}search(e,t){const n=[I.MESSAGES].map((section=>Object(r.a)(h.search(this.buildQuery({query:e,roomId:t,section:section}))).pipe(Object(map.a)((e=>({items:this.mapResult(e),section:section,requestId:e.requestId}))),Object(c.a)((e=>Object(o.a)({error:e,section:section}))))));return Object(l.a)(...n)}browse(e,t){const n={...this.buildQuery({query:e}),...t,limit:10};return Object(r.a)(h.browseRoomAndUser(n)).pipe(Object(map.a)((e=>({items:this.mapResult(e),requestId:e.requestId}))))}searchMore(e){let{query:t,roomId:n,page:o,section:section,requestId:l}=e;const c={...this.buildQuery({query:t,roomId:n,section:section}),page:o,requestId:l};return Object(r.a)(h.search(c)).pipe(Object(map.a)((e=>this.mapResult(e))))}}},411:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"usersContacts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"ObjectField",name:{kind:"Name",value:"includeInactive"},value:{kind:"BooleanValue",value:!0}}]}},{kind:"Argument",name:{kind:"Name",value:"pagination"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"ObjectField",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"total"},name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"contact"},name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"legacyId"},name:{kind:"Name",value:"nid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"portrait"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"photoUrl"},name:{kind:"Name",value:"portrait100"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"fullName"},name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"country"},name:{kind:"Name",value:"countryName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cityName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"orgId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"orgName"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:665}};n.loc.source={body:"query ($query: String, $limit: Int!, $cursor: String) {\n  usersContacts(\n    filter: { query: $query, includeInactive: true }\n    pagination: { first: $limit, after: $cursor }\n  ) {\n    total: totalCount\n    pageInfo {\n      cursor: endCursor\n    }\n    contact: edges {\n      cursor\n      node {\n        user {\n          userId: id\n          legacyId: nid\n          portrait {\n            photoUrl: portrait100\n          }\n        }\n        fullName: name\n        score\n        location {\n          country: countryName\n          cityName\n          timezone\n        }\n        organization {\n          orgId: id\n          orgName: name\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var o={};n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=n},415:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(1);var r=n(215),o=n(327),l=n(411),c=n.n(l);const d=e=>{const{fetchQueryResult:t}=Object(o.a)(e),n=Object(r.a)();return{getContactsGql:e=>{let{query:r="",limit:o=200}=e;return t(c.a,{query:r,limit:o}).then((e=>{let{data:data}=e;var t;const n=((null===(t=null==data?void 0:data.usersContacts)||void 0===t?void 0:t.contact)||[]).map((e=>{let{node:t}=e;var n;const{fullName:r,user:o,organization:l,location:c}=t,d=null===(n=null==o?void 0:o.portrait)||void 0===n?void 0:n.photoUrl;delete o.portrait;const[m,v]=null==r?void 0:r.split(" ");return{...o,fullName:r,firstName:m,lastName:v,...l,photoUrl:d,...c}}));return(e=>{const t={};return e.forEach((e=>{t[e.fullName]=(t[e.fullName]||[]).concat(e)})),e.forEach((e=>{const n=t[e.fullName]||[],r=new Set,o=new Set;if(n.forEach((e=>{r.add(e.legacyId),o.add(e.orgId)})),r.size>1&&o.size>1){const t=e.fullName!==e.orgName?"- ".concat(e.orgName):"";e.subtitle="".concat(e.legacyId," ").concat(t)}else r.size>1?e.subtitle=e.legacyId:o.size>1&&(e.subtitle=e.orgName)})),e})(n)})).catch((e=>{n.error(e)}))}}}},443:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(381),o=n(2);class l extends r.a{constructor(data){super(data),this.targetUser=null,Object.assign(this,Object(o.n)(this))}setUser(e){this.targetUser=e}}},452:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return L}));n(1);var r=n(291),o=n(382),l=n(357),c=n(323),d=n(169),m=n(178),v=n(336),f=n(292),map=n(195),filter=n(337),h=n(489),I=n(290),y=n(153),O=n(154),N=n(166),x=n(281),E=n(155);var T=n(2),j=n(177),_=n(300),k=n(214),S=n(201),w={"en-gb":n(480),en:n(481),is:n(482)};const D=(e,t)=>e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||t.t("thun_Person_581");var C=n(224);var A=n(225),F=n(51),U=n(415),R=n(200),V=n(221),M=n(170);const P={PRELOADING:"PRELOADING",IDLE:"IDLE",PENDING:"PENDING",FOUND:"FOUND",NOT_FOUND:"NOT_FOUND"},L=()=>{const{loadPersons:e}=Object(V.a)(),t=new R.a,n={},l=(e,t)=>{e.forEach((e=>{n[e]=t}))};return c=>Object(o.a)((t=>{const o=t.filter((e=>{let{targetUserId:t,targetUser:n}=e;return t&&(!n||!n.status)})),c=o.filter((e=>{let{targetUserId:t}=e;return t&&!n[t]})).map((e=>e.targetUserId));return l(c,!0),e(c).pipe(Object(v.a)((e=>{o.forEach((t=>{e[t.targetUserId]&&t.setUser(e[t.targetUserId])})),l(c,!1)})),Object(f.a)((()=>(l(c,!1),Object(r.a)([])))))})(c),(e=>{const r=e.filter((e=>{let{isAgencyDirectMessage:t,relatedAgency:r,roomId:o}=e;return t&&!r&&!n[o]}));return l(r.map((e=>e.roomId)),!0),Object(o.a)(...r.map((e=>t.getAgencyMetadata(e.roomId).pipe(Object(v.a)((t=>{e.setAgency(t),l([e.roomId],!1)}))))))})(c))};t.b=(e,t)=>{Object(F.a)(w);const n=Object(T.m)(P.PRELOADING),o=Object(T.m)(),V=Object(T.m)(!1),{getContactsGql:L}=Object(U.a)(t);let $=null;const z=Object(T.m)([]),B=new R.a,J=async function(){return L({query:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",limit:200}).then((e=>e.map((e=>{const t=new _.a(function(e,t){return new k.a({roomId:null,roomName:D(e,t),topic:null,roomType:S.a.ONE_ON_ONE,targetUserId:e.userId,targetOrgId:e.orgId,targetOrgName:e.orgName,subtitle:e.subtitle,isPublic:0,isContactRoom:1})}(e));return t.setUser(new A.a(function(e){return new C.a({location:{...e},personName:{...e},...e})}(e))),t}))))},G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(l.a)((()=>Object(c.a)(Object(d.a)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return B.getRoomsSummary({query:e,limit:200}).then((e=>e.map((e=>new _.a(e)))))}(e)),Object(d.a)(J(e))).pipe(Object(map.a)((e=>{let[t,n]=e;return t.concat(n.filter((a=>{const e=t.filter((b=>a.targetUserId===b.targetUserId&&a.targetOrgId===b.targetOrgId)),n=e.find((b=>a.roomTypeName===b.roomTypeName));return n&&(n.subtitle=a.subtitle),0===e.length})))})),Object(v.a)((e=>{$||($=e)})),Object(f.a)((e=>(o.value=e,Object(r.a)([])))))))},W=e=>{var t;null===(t=$)||void 0===t||t.push(new _.a({...e}))},Y=t=>{let{userId:n,orgId:r,roomId:o}=t;$&&e.userId===n&&e.orgId===r&&($=$.filter((e=>e.roomId!==o)))},Q=e=>{var t;let{roomId:n,...data}=e;const r=null===(t=$)||void 0===t?void 0:t.find((e=>e.roomId===n));r&&r.update(data)};let H=null;Object(T.i)((()=>{Object(M.a)((e=>{e.on("newRoom",W),e.on("removeUser",Y),e.on("updateRoom",Q)})),n.value=P.PRELOADING,H=G()})),Object(T.j)((()=>{Object(M.a)((e=>{e._off("newRoom",W),e._off("removeUser",Y),e._off("updateRoom",Q)}))}));const X=(e,t)=>e.filter((e=>t.every((t=>{var n;return e.roomName.match(t)||(null===(n=e.topic)||void 0===n?void 0:n.match(t))})))),K=new m.a;return K.pipe(Object(v.a)((e=>{e?n.value=P.PENDING:(z.value=[],n.value=P.IDLE)})),Object(filter.a)((e=>e)),Object(h.a)(300),Object(I.a)((e=>$?Object(r.a)($).pipe(Object(map.a)((t=>[t,e]))):H.pipe(function(e){var t;void 0===e&&(e=1/0);var n=(t=e&&"object"==typeof e?e:{count:e}).count,r=void 0===n?1/0:n,o=t.delay,l=t.resetOnSuccess,c=void 0!==l&&l;return r<=0?N.a:Object(y.a)((function(source,e){var t,n=0,l=function(){var d=!1;t=source.subscribe(Object(O.a)(e,(function(t){c&&(n=0),e.next(t)}),void 0,(function(c){if(n++<r){var m=function(){t?(t.unsubscribe(),t=null,l()):d=!0};if(null!=o){var v="number"==typeof o?Object(x.a)(o):Object(E.a)(o(c,n)),f=Object(O.a)(e,(function(){f.unsubscribe(),m()}),(function(){e.complete()}));v.subscribe(f)}else m()}else e.error(c)}))),d&&(t.unsubscribe(),t=null,l())};l()}))}(1),Object(map.a)((t=>[t,e]))))),Object(map.a)((e=>{let[t,n]=e;const r=Object(j.b)(n).toLowerCase().trim().split(/\s+/g).map((e=>new RegExp(e,"i")));return[X(t,r),n,r]})),Object(v.a)((e=>{let[t,r,o]=e;z.value=t,n.value=P[t.length?"FOUND":"NOT_FOUND"],((e,t)=>{V.value=!0,G(e).pipe(Object(map.a)((e=>{var n;return $=null===(n=$)||void 0===n?void 0:n.concat(e.filter((a=>!$.find((b=>a.roomId&&b.roomId?a.roomId===b.roomId:!a.roomId&&!b.roomId&&a.targetUserId===b.targetUserId&&a.targetOrgId===b.targetOrgId))))),X($,t)})),Object(v.a)((e=>{z.value=e,V.value=!1}))).subscribe()})(r,o)}))).subscribe(),{searchRooms:e=>K.next(e),getOneOnOneRoom:e=>B.getOneOnOneRoom({userId:e.targetUserId,orgId:e.targetOrgId}),results:z,status:Object(T.a)((()=>n.value)),error:o,showProgressBar:V}}},480:function(e){e.exports=JSON.parse('{"thun_Person_581":"Person"}')},481:function(e){e.exports=JSON.parse('{"thun_Person_581":"Person"}')},482:function(e){e.exports=JSON.parse('{"thun_Person_581":"[猫Person猫]"}')},561:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(443);class o extends r.a{constructor(data){super(data),this.id=data.storyId,this.user=null}setUser(e){this.user=e}}},805:function(e,t,n){"use strict";n(1);var r=n(178),o=n(291),l=n(489),c=n(337),d=n(195),m=n(290),v=n(336),f=n(358),h=n(2),I=n(201),y=n(266),O=n(443),N=n(561),x=n(200),E=n(381),T=n(452);class j extends O.a{constructor(data){super(data),this.targetUser={userId:this.userId,orgId:this.orgId,fullName:this.roomName,photoUrl:this.photoUrl,initials:Object(y.a)({firstName:this.firstName,lastName:this.lastName})},this.targetUserId=this.userId,this.targetOrgId=this.orgId}}t.a=()=>{const e=Object(T.c)(),t=new E.c,n=new r.a,y=e=>e.map((e=>e.storyId?new N.a(e):e.roomType===I.a.ONE_ON_ONE?new j(e):new O.a(e))),_=Object(h.l)({loading:{},loadingMore:{},result:{}}),k={},S=Object(h.m)(null);n.pipe(Object(l.a)(200),Object(c.a)((e=>{let[t]=e;return Boolean(t)})),Object(d.a)((e=>{let[t,n]=e;return[t.toLowerCase(),n]})),Object(m.a)((n=>{let[r,l]=n;return S.value===r?Object(o.a)(_.result):(_.loading={},E.d.forEach((section=>{_.loading[section]=!0})),t.search(r,l).pipe(Object(v.a)((t=>{let{items:n,section:section,requestId:r,error:o}=t;const l=o?[]:y(n);_.result={..._.result,[section]:l},_.loading={..._.loading,[section]:!1},k[section]={page:0,requestId:r},e(l).subscribe()})),Object(f.a)((()=>{S.value=r}))))}))).subscribe();const w=new x.a;return Object(h.j)((()=>{n.complete()})),{...Object(h.q)(_),searchQuery:(e,t)=>{n.next([e,t])},searchMore:(section,n)=>{const{page:r,requestId:o}=k[section],l=_.result[section];return _.loadingMore[section]=!0,t.searchMore({query:S.value,roomId:n,page:r+1,section:section,requestId:o}).pipe(Object(v.a)((t=>{const n=y(t),c=l.concat(n);return n.length&&(k[section]={page:r+1,requestId:o},_.result={..._.result,[section]:c},e(n).subscribe()),c})),Object(f.a)((()=>{_.loadingMore[section]=!1})))},getOneOnOneRoom:e=>w.getOneOnOneRoom({userId:e.targetUserId,orgId:e.targetOrgId}),searchMentions:e=>t.browse(e,{includeGroupRooms:!0,includeInterviewRooms:!0,includeContractRooms:!0,includeOneOnOneRooms:!0,includeCompanyContacts:!0,includeOtherContacts:!0,includeSubscribedPublicRooms:!0,includeSubscribedPrivateRooms:!1,includeUnsubscribedPublicRooms:!0}).pipe(Object(d.a)((e=>{let{items:t}=e;const n=Object.values(t.reduce(((e,t)=>(e[t.roomId]=t,e)),{}));return y(n.sort(((e,t)=>-1*e.roomTypeName.localeCompare(t.roomTypeName))))})))}}}}]);
//# sourceMappingURL=https://upwork-usw2-staging-assets-jsmaps.s3.us-west-2.amazonaws.com/ThunderNuxt/composer-search-menu.63d225a3.js.map